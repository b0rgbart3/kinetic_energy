<div id="glowscript" class="glowscript">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" href="https://www.glowscript.org/css/redmond/2.1/jquery-ui.custom.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css" />
<link type="text/css" href="https://www.glowscript.org/css/ide.css" rel="stylesheet" />
<script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/package/glow.2.1.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/package/RSrun.2.1.min.js"></script>
<script type="text/javascript"><!--//--><![CDATA[//><!--

// START JAVASCRIPT
;(function() { var __rt=srequire('streamline/lib/callbacks/runtime').runtime(__filename, false),__func=__rt.__func,__cb=__rt.__cb; function main(wait) { var version, box, sphere, cylinder, pyramid, cone, helix, ellipsoid, ring, arrow, graph, display, vector, _$rapyd$_Temp, _$rapyd$_print, arange, scene, k, m, l_eq, r_0, p_0, b, v_max, omega, fixed_end_of_spring, momentum_graph, momentum_curve, position_graph, position_curve, phase_space_graph, psp_curve, E_graph, E_curve, T_graph, T_curve, U_graph, U_curve, spring, mass, deltat, e, F_spring, v_air, F_drag, F_net, p, r, T, U, E, t; var __frame = { name: "main", line: 1 }; return __func(wait, this, arguments, main, 0, __frame, function __$main() {

    version = ["2.1","glowscript",];
    Array.prototype["+"] = function(r) { return this.concat(r); };
    window.__GSlang = "vpython";
    box = vp_box;
    sphere = vp_sphere;
    cylinder = vp_cylinder;
    pyramid = vp_pyramid;
    cone = vp_cone;
    helix = vp_helix;
    ellipsoid = vp_ellipsoid;
    ring = vp_ring;
    arrow = vp_arrow;
    graph = vp_graph;
    display = canvas;
    vector = vec;
    _$rapyd$_Temp = 0;
    _$rapyd$_print = GSprint;
    arange = range;
    scene = canvas();
    "10";
    k = 15;
    "11";
    m = 0.5;
    "12";
    l_eq = 10;
    "13";
    r_0 = vector(15, 15, 0);
    "14";
    p_0 = vector(20, 10, 15);
    "16";
    b = 0.1;
    "17";
    v_max = vector(10, 0, 0);
    "18";
    omega = sqrt(k["/"](m));
    "24";
    scene.width = 800;
    "25";
    scene.height = 800;
    "27";
    fixed_end_of_spring = sphere({ pos: vector(0, 0, 0), size: 1["*"](vector(1, 1, 1)), color: color.yellow });
    "32";
    momentum_graph = graph({ title: "Momentum vs Time" });
    "33";
    momentum_curve = gcurve({ color: color.green });
    "35";
    position_graph = graph({ title: "Position vs Time" });
    "36";
    position_curve = gcurve({ color: color.blue });
    "38";
    phase_space_graph = graph({ title: "Phase Space Portrait (Momentum vs Position)" });
    "39";
    psp_curve = gcurve({ color: color.red, dot: true });
    "41";
    E_graph = graph({ title: "Total Energy vs Time" });
    "42";
    E_curve = gcurve({ color: color.black });
    "44";
    T_graph = graph({ title: "Kinetic Energy vs Time" });
    "45";
    T_curve = gcurve({ color: color.cyan });
    "47";
    U_graph = graph({ title: "Potential Energy vs Time" });
    "48";
    U_curve = gcurve({ color: color.magenta });
    "52";
    r = r_0;
    "53";
    p = p_0;
    "54";
    t = 0;
    "55";
    spring = helix({ pos: vector(0, 0, 0), radius: 1, thickness: 0.2, color: color.orange, axis: r });
    "56";
    mass = sphere({ pos: r, size: 4["*"](vector(1, 1, 1)), color: color.cyan });
    "61";
    deltat = 0.01;
    "63"; return (function ___(__break) { var __more; var __loop = __cb(wait, __frame, 0, 0, function __$main() { __more = false;
        var __1 = (t < 50); if (__1) {
          "64";
          return rate(500, __cb(wait, __frame, 82, 8, function __$main() {
            "67";
            e = l_eq["*"](hat(r));
            "68";
            F_spring = k["-u"]()["*"](r["-"](e));
            "71";
            v_air = v_max["*"](sin(omega["*"](t)));
            "72";
            F_drag = b["-u"]()["*"](p["/"](m)["-"](v_air));
            "74";
            F_net = F_spring["+"](F_drag);
            "77";
            p = p["+"](F_net["*"](deltat));
            "78";
            r = r["+"](p["/"](m)["*"](deltat));
            "79";
            T = dot(p, p)["/"](2["*"](m));
            "80";
            U = k["*"](dot(r["-"](e), r["-"](e)))["/"](2);
            "81";
            E = T["+"](U);
            "83";
            mass.pos = r;
            "84";
            spring.axis = r;
            "87";
            momentum_curve.plot({ pos: [t,p.x,] });
            "88";
            position_curve.plot({ pos: [t,r.x,] });
            "89";
            psp_curve.plot({ pos: [r.x,p.x,] });
            "90";
            E_curve.plot({ pos: [t,E,] });
            "91";
            T_curve.plot({ pos: [t,T,] });
            "92";
            U_curve.plot({ pos: [t,U,] });
            "95";
            t = t["+"](deltat); while (__more) { __loop(); }; __more = true; }, true)); } else { __break(); } ; }); do { __loop(); } while (__more); __more = true; })(function __$main() { ; }); });};


main;

;$(function(){ window.__context = { glowscript_container: $("#glowscript").removeAttr("id") }; main(__func) })})()
// END JAVASCRIPT

//--><!]]></script>
</div>